(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{399:function(a,s,t){"use strict";t.r(s);var e=t(54),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"modelos-y-migraciones"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modelos-y-migraciones"}},[a._v("#")]),a._v(" Modelos y Migraciones")]),a._v(" "),t("h3",{attrs:{id:"modelo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#modelo"}},[a._v("#")]),a._v(" Modelo")]),a._v(" "),t("p",[a._v("El modelo es la parte del patrón "),t("a",{attrs:{href:"https://www.adaweb.es/modelo-vista-controlador-mvc-php/",target:"_blank",rel:"noopener noreferrer"}},[a._v("MVC"),t("OutboundLink")],1),a._v(" que nos permite la comunicación con las tablas de nuestra base de datos a través de su clase.")]),a._v(" "),t("h3",{attrs:{id:"migracion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#migracion"}},[a._v("#")]),a._v(" Migración")]),a._v(" "),t("p",[a._v("Se dice que las migraciones son un control de versiones de nuestra base de datos, pero en realidad son más que eso. Este nos permite crear tablas, establecer relaciones, modificarlas, y por supuesto eliminarlas, y todo esto mediante la consola de comandos.")]),a._v(" "),t("p",[a._v("A continuación te mostraré el diseño de nuestra base de datos por medio del siguiente diagrama:")]),a._v(" "),t("img",{staticStyle:{width:"600px"},attrs:{src:a.$withBase("/img/diagrama.png")}}),a._v(" "),t("p",[a._v("Cabe resaltar que al crear nuestras migraciones debemos seguir un orden teniendo en cuenta nuestro modelo de base de datos, no podemos crear una migración que hace referencia a una tabla débil sin antes haber creado la tabla fuerte. Ejemplo, viendo nuestro diagrama nos damos cuenta que la tabla géneros sería la tabla fuerte con respecto a la tabla mascotas, por lo tanto, no podríamos crear primero la migración mascotas si no existe antes la de géneros, ya que al momento de establecer la relación nos dará error.")]),a._v(" "),t("h4",{attrs:{id:"crear-modelos-migraciones-y-factory"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#crear-modelos-migraciones-y-factory"}},[a._v("#")]),a._v(" Crear modelos migraciones y factory.")]),a._v(" "),t("p",[a._v("El modelo usuario ya está creado por defecto con la instalación de Laravel, crearemos el de mascotas y géneros.")]),a._v(" "),t("p",[a._v("Con el siguiente comando crearemos de un tiro el modelo, la migración y el factory de géneros.")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("php artisan make:model Gender -mf\n")])])]),t("p",{staticStyle:{"background-color":"coral","border-radius":"25px",padding:"10px"}},[a._v("Nota: Por convención los modelos deben crearse en singular y Laravel es tan inteligente que al momento de crear nuestra tabla dentro de la migración se generará en plural")]),a._v(" "),t("p",[a._v("El comando anterior nos generó 3 archivos dentro de nuestro proyecto, el modelo lo encontraremos en el directorio "),t("b",[a._v("app/Models/Gender.php")]),a._v(", el factory en "),t("b",[a._v("database/factories/GenderFactory.php")]),a._v(" y la migración "),t("b",[a._v("database/migrations/2021_11_04_040728_create_genders_table.php")])]),a._v(" "),t("h4",{attrs:{id:"creando-campos-de-nuestra-migracion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#creando-campos-de-nuestra-migracion"}},[a._v("#")]),a._v(" Creando campos de nuestra migración.")]),a._v(" "),t("p",[a._v("Abriremos el archivo de migración generado y dentro de la función up configuramos nuestro Schema de la siguiente forma:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[a._v("Schema")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'genders'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[a._v("Blueprint")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Este campo es la llave primaria y será auto incrementable")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token keyword type-declaration"}},[a._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("15")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//con el numero le espesificamos el tamaño del campo")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("timestamps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("p",[a._v("Así como estamos asigando al campo name el tipo string hay muchos más tipos, para ver la lista completa entremos "),t("a",{attrs:{href:"https://laravel.com/docs/8.x/migrations#available-column-types",target:"_blank",rel:"noopener noreferrer"}},[a._v("AQUÍ"),t("OutboundLink")],1)]),a._v(" "),t("p",[a._v("Procederemos con la creación del modelo, migración y factory de mascotas")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("php artisan make:model Pet -mf\n")])])]),t("p",[a._v("Esta será la configuración de nuestra migración de mascotas")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[a._v("Schema")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'pets'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[a._v("Blueprint")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("id")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token keyword type-declaration"}},[a._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'name'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("integer")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'age'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("foreignId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'id_gender'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("constrained")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'genders'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Relación con géneros")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("foreignId")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'id_user'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("constrained")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[a._v("'users'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//Relación con usuarios")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$table")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("timestamps")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n")])])]),t("h4",{attrs:{id:"ejecutar-migraciones"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ejecutar-migraciones"}},[a._v("#")]),a._v(" Ejecutar migraciones")]),a._v(" "),t("p",[a._v("Después de haber configurado nuestras tablas en las migraciones, ejecutaremos las migraciones para que se nos creen todas las tablas con sus respectivos campos y relaciones con el siguiente comando.")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("php artisan migrate\n")])])]),t("p",[a._v("Si vamos a nuestra base de datos nos daremos cuenta que ya no está vacía.")])])}),[],!1,null,null,null);s.default=n.exports}}]);