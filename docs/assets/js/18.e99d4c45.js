(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{402:function(a,s,t){"use strict";t.r(s);var e=t(54),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"instalacion-y-configuracion-de-passport"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instalacion-y-configuracion-de-passport"}},[a._v("#")]),a._v(" Instalación y configuración de Passport")]),a._v(" "),t("p",[a._v("Laravel "),t("a",{attrs:{href:"https://laravel.com/docs/8.x/passport#introduction",target:"_blank",rel:"noopener noreferrer"}},[a._v("Passport"),t("OutboundLink")],1),a._v(" proporciona una implementación completa del servidor OAuth2 para su aplicación Laravel en cuestión de minutos. Passport está construido sobre el servidor League OAuth2 mantenido por Andy Millington y Simon Hamp.")]),a._v(" "),t("h3",{attrs:{id:"instalacion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instalacion"}},[a._v("#")]),a._v(" Instalación")]),a._v(" "),t("p",[a._v("Para comenzar, instale Passport a través del administrador de paquetes Composer:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("composer require laravel/passport\n")])])]),t("p",[a._v("El proveedor de servicios de Passport registra su propio directorio de migración de base de datos, por lo que debe migrar su base de datos después de instalar el paquete. Las migraciones de Passport crearán las tablas que su aplicación necesita para almacenar clientes OAuth2 y tokens de acceso:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("php artisan migrate\n")])])]),t("p",[a._v("A continuación, debe ejecutar el "),t("strong",[a._v("passport:install")]),a._v(" comando Artisan. Este comando creará las claves de cifrado necesarias para generar tokens de acceso seguro. Además, el comando creará clientes de "),t("strong",[a._v('"acceso personal"')]),a._v(" y "),t("strong",[a._v('"concesión de contraseña"')]),a._v(" que se utilizarán para generar tokens de acceso:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("php artisan passport:install\n")])])]),t("p",[a._v("Después de ejecutar el passport:install comando, agregue el "),t("b",[a._v("Laravel\\Passport\\HasApiTokens")]),a._v(" rasgo a su "),t("b",[a._v("App\\Models\\UserModel")]),a._v(". Este rasgo proporcionará algunos métodos auxiliares a su modelo que le permitirán inspeccionar el token y los alcances del usuario autenticado:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token php language-php"}},[t("span",{pre:!0,attrs:{class:"token delimiter important"}},[a._v("<?php")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("namespace")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("App"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Models")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Database"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Eloquent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Factories"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("HasFactory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Foundation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Auth"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("User")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("as")]),a._v(" Authenticatable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Illuminate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Notifications"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Notifiable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Laravel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("HasApiTokens")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name-definition class-name"}},[a._v("User")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("Authenticatable")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("HasApiTokens")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" HasFactory"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" Notifiable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),t("p",[a._v("A continuación, debe llamar al "),t("strong",[a._v("Passport::routes")]),a._v(" método dentro del boot método de su "),t("b",[a._v("App\\Providers\\AuthServiceProvider")]),a._v(". Este método registrará las rutas necesarias para emitir tokens de acceso y revocar tokens de acceso, clientes y tokens de acceso personal:")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-definition function"}},[a._v("boot")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$this")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("->")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("registerPolicies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name static-context"}},[a._v("Passport")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("p",[a._v("No olvides importar la clase Passport en el "),t("b",[a._v("AuthServiceProvider")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-php extra-class"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("use")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token package"}},[a._v("Laravel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("Passport")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])]),t("p",[a._v("Finalmente, en el "),t("b",[a._v("config/auth.php")]),a._v(" archivo de configuración de su aplicación , debe establecer la driveropción de la apiprotección de autenticación en passport. Esto le indicará a su aplicación que use Passport TokenGuardal autenticar solicitudes de API entrantes:")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("'guards' => [\n    'web' => [\n        'driver' => 'session',\n        'provider' => 'users',\n    ],\n\n    'api' => [\n        'driver' => 'passport',\n        'provider' => 'users',\n    ],\n],\n")])])]),t("p",[a._v("¡Listo!, con esto ya tenemos Passport configurado y listo para generar Tokens de accesos.")])])}),[],!1,null,null,null);s.default=n.exports}}]);